%!TEX root=../document.tex

\section{Ergebnisse}
\label{sec:Ergebnisse}

\subsection{Installation und Testdurchlauf von Ori}
Für die Übungsdurchführung wird mithife von Vagrant eine 'ubuntu/wily64'-Box bereitgestellt. Das dazugehörige Vagrantfile befindet sich in unserem Repository. \cite{repo} Auf der Herstellerseite sind auch einige der wichtigsten Kernaspekte von OriFS aufgelistet: 

\begin{itemize}
	\item Peer-to-Peer \newline
	'Ori operates peer-to-peer among your devices and uses existing secure communication channels such as SSH to transfer your data.'
	\item Work Offline \newline
	'In today's world we often are moving around with intermittent network connectivity and we want to access our data when we board a plane or travel to the office.'
	\item Secure \newline
	'Ori can verify the authenticity of your data and ensure it has not been tampered with. Data is transfered over SSH. Device discovery and automatic synchronization uses a shared secret to initiate transfers.'
	\item Instant Access \newline
	'Instantly mount remote file systems and start working while you synchronize data in the background.' \cite{OrifsStanford}
\end{itemize}

\subsubsection{Fehler bei Installation über Ubuntu PPA}
Die Installationsanleitung auf der Seite der Hersteller \cite{OrifsStanford} ist falsch. \newline
\begin{lstlisting}[frame=single, language=bash, caption=Anleitung zur Installation laut Hersteller - fehlerhaft]
add-apt-repository ppa:ezyang/ppa
apt-get update
# Hier entsteht der Fehler: 404 Not Found
# Einige Indexdateien konnten nicht heruntergeladen werden. 
# Sie wurden ignoriert oder alte an ihrer Stelle benutzt.
apt-get install ori # Funktioniert nicht!
\end{lstlisting}
Hierbei kommt es zu einem 404-Fehler, die Informationen zur Installation sind nicht mehr aktuell. Diese Paketquelle ist nicht mehr vorhanden, da sie bereits in den Standard-Paketquellen vorhanden sind.
\subsubsection{Installation in Ubuntu}
Im Zuge dessen ist es regelrecht einfach, OriFS zu installieren. Folgende Befehle sind notwendig:
\begin{lstlisting}[frame=single, language=bash, caption=Anleitung zur Installation]c
apt-get update
apt-get install ori
\end{lstlisting}
Daraufhin ist OriFS unter Ubuntu vollständig installiert.
\subsubsection{Kompilieren und Installation 'from source' mit SCons}
OriFS ist laut den Herstellern verfügbar für FreeBSD, OS X, Arch Linux und Ubuntu.
Es gibt aber natürlich auch eine andere Art, das Programm zu erlangen: Direkt über den frei zugänglichen Quelltext kompilieren und installieren. Dafür sind folgende Schritte notwendig:
\begin{lstlisting}[frame=single, language=bash, caption=Anleitung zur Installation 'from source']
apt-get update

apt-get install scons build-essential pkg-config -y
apt-get install libboost-dev uuid-dev libfuse-dev libevent-dev libssl-dev -y

wget https://bitbucket.org/orifs/ori/downloads/ori-0.8.1.tar.xz
tar xvfJ ori-0.8.1.tar.xz
cd ori-0.8.1

scons

scons PREFIX=/usr/local/ install
\end{lstlisting}
Hierbei wird unter anderem SCons als Build-Tool verwendet. Der Installationspfad '/usr/local' ist daher vorzuziehen, weil hier vom Administrator Programme und Dateien ablegt werden können, die von der entsprechenden Distribution des jeweiligen Systems unabhängig installiert worden sind, wie etwa selbstkompilierte oder unabhängig von der Distribution heruntergeladene Programme. 

\subsubsection{OriFS-Testfälle ausführen}
Im entpackten Sourcecode-Archiv sind auch die von uns gewünschten Testfälle enthalten. Folgendes Skript führt diese aus:
\begin{lstlisting}[frame=single, language=bash, caption=Erster Versuch Testfälle]
./runtests.sh
\end{lstlisting}
Nach nur wenigen Testfällen schlägt der Lauf fehl. Eine Recherche ergibt, dass dies keineswegs ein Einzelfall ist. Das mitgelieferte README-File, zitiert: \newline
\textit{'There are multiple unit tests available inside the build directory.  The
end-to-end tests are in ongoing development and only about half of them are
expected to run reliably.  In a future release the tests will be improved to
make it easier to run.'} \newline
Die in der Aufgabenstellung beschriebene Hilfestellung schafft Abhilfe. \cite{OrifsBitbucket} Im folgenden Schritt wird im extrahierten Archiv die Datei \textit{runtests\_config.sh} angelegt. Das File beinhaltet folgende Zeilen:
\begin{lstlisting}[frame=single, language=bash, caption=Inhalt runtests\_config.sh]
# Required for Mac OS X and FreeBSD only (comment out on Linux machines)
# export UMOUNT="umount"

# Not updated to new CLI
HTTP_CLONE="no"
HTTP_PULL="no"
MERGE="no"
MOUNT_WRITE="no"
MOUNT_WRITE_PYTHON_MT="no"
\end{lstlisting}
\clearpage
Die Unit-Tests, die nicht funktionieren, werden übersprungen. Bei Fehlern muss der Ordner \textit{tempdir} sowie die Testrepositories in dem im Home-Verzeichnis versteckten Ordner \textit{~/.ori/<name>.ori} gelöscht werden. Ein SSH-Public Key muss ebenso angelegt werden, um ein passwortloses Anmelden zu ermöglichen. Die Tests mit der Numer 54 und 61 resultieren in einem Syntaxfehler. Das Package ist nicht auf dem Rechner vorhanden, liegt daher nicht an OriFS. Nach ausgedehntem Troubleshooting und Lesen der Fehlermeldung konnte auch dieser Fehler behoben werden. Die Files im Ordner \textit{ori\_tests}, \textit{53-mount-write-wget.sh} sowie \textit{61-mount-write-wget-mt.sh}, müssen ausgebessert werden. Die jeweils erste Zeile muss auf die aktuell installierte Version von \textit{wget} zeigen. In diesem Fall wurde der String auf \textit{wget-1.16.1} ausgebessert. Erst jetzt funktionieren die Tests ohne Probleme. Die Testfälle 01-05, 11-15, 30, 52-53, 60-61 wurden erfolgreich ausgeführt, 21-22, 35, 51, 62 wurden übersprungen.

\subsection{Einsatz/Dokumentation der Ori API}
\subsubsection{replicate}

%\begin{lstlisting}[frame=single, caption=Testcaption]
%
%\end{lstlisting}
%
%
%\begin{figure}[!h]
%	\begin{center}
%		\includegraphics[width=1.0\linewidth]{images/ldapadmin_main.png}
%		\caption{phpLDAPadmin Startseite}
%		\label{ldapadmin_main}
%	\end{center}
%\end{figure}